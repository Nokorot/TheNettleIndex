{% extends 'header.html' %}

{% block head %} 
<title>The Nettle Index</title>
{% endblock %} 

{%block title%}The Nettle Index{%endblock title%}

{% block body %}
<div style="display: flex; justify-content: center; align-items: center; margin: 20px;">
  <form method="get" action="/" style="margin-right: 20px;">
    <input type="text" name="search" placeholder="Search entries..." value="{{ request.args.get('search', '') }}" style="padding: 10px; width: 300px; border-radius: 5px; border: 1px solid #ccc;">
    <button type="submit" style="padding: 10px; border-radius: 5px; background-color: #007bff; color: white; border: none;">Search</button>
  </form>
  <a href="{{ url_for('new_entry') }}" class="add-button" style="padding: 10px; border-radius: 5px; background-color: #28a745; color: white; text-decoration: none;">âž• Add New Entry</a>
</div>

<div class="forum-container">
  {% for entry in entries %}
  <div class="entry">
    <div class="entry-body">
      <div class="entry-text">
        <div class="entry-title">
          <a href="/entry/{{ entry.id }}">{{ entry.name }}</a>
        </div>
        <div class="entry-meta">
          Posted by <strong>{{ entry.owner }}</strong> on {{ entry.time_added | pretty_time }}
        </div>
        <div class="entry-content">
          {{ entry.description }}
        </div>
      </div>
      {% if entry.image_url %}
      <div class="entry-image">
        <img src="{{ entry.image_url }}" alt="Image for {{ entry.name }}">
      </div>
      {% endif %}
    </div>
  </div>
  {% endfor %}
</div>

<!-- Pagination controls -->
<div style="text-align: center; margin-top: 20px;">
  {% if page > 1 %}
  <a href="/?search={{ request.args.get('search', '') }}&page={{ page - 1 }}" style="margin-right: 10px;">Previous</a>
  {% endif %}
  <span>Page {{ page }} of {{ total_pages }}</span>
  {% if page < total_pages %}
  <a href="/?search={{ request.args.get('search', '') }}&page={{ page + 1 }}" style="margin-left: 10px;">Next</a>
  {% endif %}
</div>
{% endblock %}
